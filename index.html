<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SG FluentX | Professional English Learning Platform</title>
    <meta name="description" content="Master English with structured lessons from beginner to advanced.">
    
    <!-- Tailwind + DaisyUI -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
    
    <!-- Marked.js for Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    
    <!-- Highlight.js for code syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

    <style>
        * { font-family: 'Inter', sans-serif; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Poppins', sans-serif; }
        
        /* Welcome Screen Styles */
        #welcomeScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            z-index: 99999;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
            transition: opacity 0.5s ease-out;
            overflow-y: auto;
            padding: 1rem;
        }
        
        #welcomeScreen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        .welcome-content {
            text-align: center;
            color: white;
            padding: 3rem 1rem;
            max-width: 900px;
            width: 100%;
            margin: auto;
        }
        
        .welcome-header {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 2rem;
            margin-top: 1rem;
            letter-spacing: 2px;
            animation: slideInDown 0.8s ease-out;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        @media (max-width: 768px) {
            .welcome-content {
                padding: 2rem 1rem;
            }
            
            .welcome-header {
                font-size: 1.75rem;
                letter-spacing: 1px;
                margin-top: 0.5rem;
            }
        }
        
        .welcome-box {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: slideInUp 0.8s ease-out both;
            transition: all 0.3s ease;
        }
        
        .welcome-box:hover {
            transform: translateY(-4px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        
        .welcome-box:nth-child(2) { animation-delay: 0.2s; }
        .welcome-box:nth-child(3) { animation-delay: 0.3s; }
        .welcome-box:nth-child(4) { animation-delay: 0.4s; }
        .welcome-box:nth-child(5) { animation-delay: 0.5s; }
        
        .welcome-box .icon {
            font-size: 2.5rem;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
        }
        
        @media (max-width: 768px) {
            .welcome-box .icon {
                font-size: 2rem;
                width: 50px;
                height: 50px;
            }
            
            .welcome-box {
                padding: 1rem;
                gap: 0.75rem;
            }
        }
        
        .welcome-box h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: white;
        }
        
        @media (max-width: 768px) {
            .welcome-box h3 {
                font-size: 1rem;
            }
        }
        
        .welcome-box p {
            font-size: 0.95rem;
            margin: 0.25rem 0;
            opacity: 0.95;
            line-height: 1.6;
        }
        
        @media (max-width: 768px) {
            .welcome-box p {
                font-size: 0.85rem;
            }
        }
        
        .welcome-image {
            width: 100%;
            max-width: 600px;
            height: auto;
            border-radius: 20px;
            margin: 2rem auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
            animation: fadeIn 1s ease-out 0.6s both;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }
        
        .welcome-program {
            font-size: 1.5rem;
            font-weight: 700;
            margin: 2rem 0 0.5rem;
            animation: slideInUp 0.8s ease-out 0.7s both;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        @media (max-width: 768px) {
            .welcome-program {
                font-size: 1.25rem;
            }
        }
        
        .welcome-tagline {
            font-size: 1rem;
            font-weight: 600;
            letter-spacing: 3px;
            margin-bottom: 2rem;
            opacity: 0.95;
            animation: slideInUp 0.8s ease-out 0.8s both;
        }
        
        @media (max-width: 768px) {
            .welcome-tagline {
                font-size: 0.85rem;
                letter-spacing: 2px;
            }
        }
        
        .welcome-button {
            background: white;
            color: #667eea;
            padding: 1.25rem 3rem;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideInUp 0.8s ease-out 0.9s both;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        @media (max-width: 768px) {
            .welcome-button {
                padding: 1rem 2rem;
                font-size: 0.95rem;
                width: 100%;
                max-width: 300px;
            }
        }
        
        .welcome-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            background: #f0f0f0;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        #mainApp {
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }
        
        #mainApp.show {
            opacity: 1;
        }
        
        .chapter-card { 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .chapter-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(99, 102, 241, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .chapter-card:hover::before { left: 100%; }
        .chapter-card:hover { transform: translateY(-4px); box-shadow: 0 12px 32px rgba(99, 102, 241, 0.15); }
        
        @media (max-width: 1024px) {
            .chapter-card:hover { transform: none; }
        }
        
        .glass-nav { 
            backdrop-filter: blur(20px) saturate(180%);
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        @media (max-width: 768px) {
            .glass-nav .navbar {
                padding: 0.5rem 1rem;
            }
        }
        
        .dark .glass-nav { 
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-glass {
            backdrop-filter: blur(16px) saturate(180%);
            background: rgba(255, 255, 255, 0.92);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .dark .sidebar-glass {
            background: rgba(30, 41, 59, 0.92);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .content-glass {
            backdrop-filter: blur(16px) saturate(180%);
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.5);
        }
        
        .dark .content-glass {
            background: rgba(30, 41, 59, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 50%, #d946ef 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .level-badge {
            font-size: 0.625rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }
        
        .custom-scrollbar::-webkit-scrollbar { width: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
        .custom-scrollbar::-webkit-scrollbar-thumb { 
            background: rgba(99, 102, 241, 0.3);
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(99, 102, 241, 0.5); }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-slide-in { animation: slideIn 0.5s ease-out; }
        
        .search-container {
            position: relative;
        }
        
        .search-container::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #6366f1, #8b5cf6);
            transition: width 0.3s ease;
        }
        
        .search-container:focus-within::after { width: 100%; }
        
        .stats-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 1.5rem;
            color: white;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .progress-ring {
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }

        /* Markdown Content Styling */
        .markdown-content {
            font-size: 1rem;
            line-height: 1.75;
            color: #374151;
        }

        .dark .markdown-content {
            color: #d1d5db;
        }

        .markdown-content h1 {
            font-size: 2rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #1f2937;
            line-height: 1.3;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .dark .markdown-content h1 {
            color: #f9fafb;
        }

        .markdown-content h2 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 0.875rem;
            color: #1f2937;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #e5e7eb;
        }

        .dark .markdown-content h2 {
            color: #f3f4f6;
            border-bottom-color: #4b5563;
        }

        .markdown-content h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: #374151;
        }

        .dark .markdown-content h3 {
            color: #e5e7eb;
        }

        .markdown-content h4 {
            font-size: 1.125rem;
            font-weight: 600;
            margin-top: 1.25rem;
            margin-bottom: 0.5rem;
            color: #4b5563;
        }

        .dark .markdown-content h4 {
            color: #d1d5db;
        }

        .markdown-content p {
            margin-bottom: 1.25rem;
            line-height: 1.75;
        }

        .markdown-content strong {
            font-weight: 600;
            color: #1f2937;
        }

        .dark .markdown-content strong {
            color: #f9fafb;
        }

        .markdown-content em {
            font-style: italic;
        }

        .markdown-content a {
            color: #6366f1;
            text-decoration: underline;
            transition: color 0.2s;
        }

        .markdown-content a:hover {
            color: #8b5cf6;
        }

        .dark .markdown-content a {
            color: #a5b4fc;
        }

        .dark .markdown-content a:hover {
            color: #c4b5fd;
        }

        .markdown-content ul, .markdown-content ol {
            margin-bottom: 1.25rem;
            padding-left: 0;
            list-style: none;
        }

        .markdown-content ul li, .markdown-content ol li {
            position: relative;
            padding-left: 2rem;
            margin-bottom: 0.75rem;
            line-height: 1.75;
        }

        .markdown-content ul li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.6rem;
            width: 0.5rem;
            height: 0.5rem;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            border-radius: 50%;
        }

        .markdown-content ol {
            counter-reset: list-counter;
        }

        .markdown-content ol li {
            counter-increment: list-counter;
        }

        .markdown-content ol li::before {
            content: counter(list-counter);
            position: absolute;
            left: 0;
            top: 0;
            width: 1.5rem;
            height: 1.5rem;
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .markdown-content blockquote {
            border-left: 4px solid #6366f1;
            background: #f3f4f6;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0.5rem;
            font-style: italic;
        }

        .dark .markdown-content blockquote {
            background: rgba(99, 102, 241, 0.1);
            border-left-color: #8b5cf6;
        }

        .markdown-content code {
            background: #f3f4f6;
            color: #e11d48;
            padding: 0.125rem 0.375rem;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-family: 'Courier New', monospace;
        }

        .dark .markdown-content code {
            background: #374151;
            color: #fca5a5;
        }

        .markdown-content pre {
            background: #1f2937;
            color: #f9fafb;
            padding: 1.5rem;
            border-radius: 0.75rem;
            overflow-x: auto;
            margin: 1.5rem 0;
            border: 1px solid #374151;
        }

        .markdown-content pre code {
            background: transparent;
            color: inherit;
            padding: 0;
            font-size: 0.875rem;
            line-height: 1.7;
        }

        .markdown-content table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 1.5rem 0;
            border-radius: 0.75rem;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .markdown-content thead {
            background: linear-gradient(135deg, #6366f1, #8b5cf6);
            color: white;
        }

        .markdown-content th {
            padding: 0.875rem 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .markdown-content td {
            padding: 0.875rem 1rem;
            border-bottom: 1px solid #e5e7eb;
            background: white;
        }

        .dark .markdown-content td {
            background: rgba(30, 41, 59, 0.5);
            border-bottom-color: #4b5563;
        }

        .markdown-content tbody tr:hover td {
            background: #f9fafb;
        }

        .dark .markdown-content tbody tr:hover td {
            background: rgba(99, 102, 241, 0.1);
        }

        .markdown-content img {
            max-width: 100%;
            height: auto;
            border-radius: 0.75rem;
            margin: 1.5rem auto;
            display: block;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
            border: 1px solid #e5e7eb;
            transition: transform 0.3s ease;
        }

        .dark .markdown-content img {
            border-color: #4b5563;
        }

        .markdown-content img:hover {
            transform: scale(1.02);
        }

        .markdown-content hr {
            border: none;
            height: 2px;
            background: linear-gradient(90deg, transparent, #e5e7eb, transparent);
            margin: 2rem 0;
        }
        
		if i want to full screnn image on click how it will work      thisis enough     "/* Image Modal Styles */
        #imageModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 99999;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(10px);
        }

        #imageModal.show {
            display: flex;
            opacity: 1;
        }

        #imageModal img {
            max-width: 95%;
            max-height: 95%;
            object-fit: contain;
            margin: auto;
            border-radius: 8px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }

        #imageModal.show img {
            transform: scale(1);
        }

        #imageModal .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        #imageModal .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        #imageModal .nav-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 48px;
            height: 48px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        #imageModal .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-50%) scale(1.1);
        }

        #imageModal .nav-btn.prev {
            left: 20px;
        }

        #imageModal .nav-btn.next {
            right: 20px;
        }

        #imageModal .image-counter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 20px;
            border-radius: 25px;
            color: white;
            font-size: 14px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            #imageModal img {
                max-width: 100%;
                max-height: 100%;
            }

            #imageModal .close-btn {
                width: 40px;
                height: 40px;
                font-size: 20px;
                top: 15px;
                right: 15px;
            }

            #imageModal .nav-btn {
                width: 40px;
                height: 40px;
                font-size: 18px;
            }

            #imageModal .nav-btn.prev {
                left: 15px;
            }

            #imageModal .nav-btn.next {
                right: 15px;
            }

            #imageModal .image-counter {
                bottom: 20px;
                font-size: 12px;
                padding: 6px 16px;
            }
        }"
		
        .dark .markdown-content hr {
            background: linear-gradient(90deg, transparent, #4b5563, transparent);
        }
		
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 via-indigo-50 to-purple-50 dark:from-slate-950 dark:via-indigo-950 dark:to-purple-950 text-gray-900 dark:text-gray-100">

    <!-- Welcome Screen -->
    <div id="welcomeScreen">
        <div class="welcome-content">
            <h1 class="welcome-header">LEARN, SPEAK, SHINE</h1>
            
            <div class="welcome-box">
                <span class="icon">‚ùì</span>
                <div>
                    <h3>Question of the Day</h3>
                    <p>- Every Student Answers the One Question.</p>
                    <p>- Builds confidence and gives equal chance to all.</p>
                </div>
            </div>
            
            <div class="welcome-box">
                <span class="icon">üìñ</span>
                <div>
                    <h3>Sentence Formation Practice</h3>
                    <p>- Create your own sentences.</p>
                    <p>- Improves grammar + vocabulary.</p>
                </div>
            </div>
            
            <div class="welcome-box">
                <span class="icon">üé§</span>
                <div>
                    <h3>Speaking Round</h3>
                    <p>- Share your answers aloud.</p>
                    <p>- Boosts fluency & removes hesitation.</p>
                </div>
            </div>
            
            <div class="welcome-box">
                <span class="icon">‚úÖ</span>
                <div>
                    <h3>Feedback & Corrections</h3>
                    <p>- Trainer Guides on Grammar & Pronunciation.</p>
                    <p>- Encourages progress with positive motivation.</p>
                </div>
            </div>
            
            <img src="https://thumbs.dreamstime.com/b/learn-english-students-studying-books-group-people-classroom-147387357.jpg" 
                 alt="Group of people learning English" 
                 class="welcome-image">
            
            <div class="welcome-program">English Proficiency Program</div>
            <div class="welcome-tagline">INTERACTIVE | PRACTICAL | CONFIDENCE-BUILDING</div>
            
            <button class="welcome-button" onclick="enterPlatform()">
                Start Learning Now
            </button>
			
        </div>
    </div>

    <!-- Main Application (Hidden Initially) -->
    <div id="mainApp">

    <!-- Professional Navigation Bar -->
    <nav class="navbar fixed top-0 z-50 glass-nav shadow-lg h-16 min-h-16">
        <div class="max-w-screen-2xl mx-auto w-full px-3 lg:px-6 h-full">
            <div class="flex-1 h-full">
                <div class="flex items-center gap-2 lg:gap-3 h-full">
                    <div class="avatar">
                        <div class="w-9 h-9 lg:w-10 lg:h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center shadow-lg">
                            <i class="fas fa-graduation-cap text-white text-base lg:text-lg"></i>
                        </div>
                    </div>
                    <div>
					
                        <h1 class="text-base lg:text-xl font-bold gradient-text leading-tight">SG FluentX</h1>
                        <p class="text-xs text-gray-600 dark:text-gray-400 font-medium hidden sm:block leading-tight">English Learning</p>
                    </div>
                </div>
            </div>
            
            <div class="flex-none gap-1.5 lg:gap-3 h-full flex items-center">
                <!-- Mobile Menu Toggle -->
                <button id="mobileMenuToggle" class="btn btn-ghost btn-sm btn-circle lg:hidden">
                    <i class="fas fa-bars text-base"></i>
                </button>
                
                <div class="search-container hidden lg:flex items-center gap-2 bg-white/70 dark:bg-slate-800/70 rounded-xl px-4 py-2 shadow-md border border-gray-200/50 dark:border-gray-700/50">
                    <i class="fas fa-search text-gray-500 text-sm"></i>
                    <input type="text" id="searchInput" placeholder="Search lessons..." 
                           class="bg-transparent outline-none w-64 text-sm font-medium text-gray-700 dark:text-gray-200 placeholder-gray-500">
                </div>
                
                <button id="darkModeToggle" class="btn btn-ghost btn-sm btn-circle hover:bg-indigo-100 dark:hover:bg-indigo-900 hidden sm:flex">
                    <i class="fas fa-moon text-base text-gray-700 dark:text-gray-300"></i>
                </button>
                
                <button id="sidebarToggle" class="btn btn-ghost btn-sm btn-circle hover:bg-indigo-100 dark:hover:bg-indigo-900 hidden lg:flex" title="Toggle Sidebar">
                    <i class="fas fa-bars-staggered text-base text-gray-700 dark:text-gray-300"></i>
                </button>
                
                
            </div>
        </div>
    </nav>
     
	 <!-- IMAGE MODAL ‚Äî PUT IT HERE (right before scripts) -->
    <div id="imageModal" class="fixed inset-0 z-[99999] items-center justify-center hidden">
        <div class="absolute inset-0 bg-black/95 backdrop-blur-md" onclick="closeImageModal()"></div>
        <span class="close-btn absolute top-6 right-6 z-10 text-white text-5xl cursor-pointer hover:rotate-90 transition-transform"
              onclick="closeImageModal()">&times;</span>
        <img id="modalImage" class="max-w-[95vw] max-h-[95vh] object-contain rounded-lg shadow-2xl">
    </div>
	
    <!-- Mobile Sidebar Overlay -->
    <div id="mobileSidebarOverlay" class="fixed inset-0 bg-black/50 z-40 hidden lg:hidden"></div>
    
    <!-- Mobile Sidebar -->
    <aside id="mobileSidebar" class="fixed top-0 left-0 h-full w-80 max-w-[85vw] z-50 transform -translate-x-full transition-transform duration-300 lg:hidden">
        <div class="sidebar-glass h-full p-6 overflow-y-auto custom-scrollbar">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100">Curriculum</h2>
                <button id="closeMobileSidebar" class="btn btn-ghost btn-sm btn-circle">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>
            
            <!-- Mobile Search -->
            <div class="mb-4">
                <div class="flex items-center gap-2 bg-white/70 dark:bg-slate-800/70 rounded-xl px-4 py-2 border border-gray-200/50 dark:border-gray-700/50">
                    <i class="fas fa-search text-gray-500 text-sm"></i>
                    <input type="text" id="mobileSearchInput" placeholder="Search..." 
                           class="bg-transparent outline-none w-full text-sm font-medium text-gray-700 dark:text-gray-200 placeholder-gray-500">
                </div>
            </div>
            
            <!-- Filter Tabs -->
            <div class="flex gap-1 mb-4">
                <button class="btn btn-xs flex-1 mobile-filter-btn btn-active" data-filter="all">All</button>
                <button class="btn btn-xs flex-1 mobile-filter-btn" data-filter="incomplete">Progress</button>
                <button class="btn btn-xs flex-1 mobile-filter-btn" data-filter="complete">Done</button>
            </div>
            
            <!-- Chapter List -->
            <div id="mobileChapterList" class="mb-6">
                <!-- Chapters rendered here -->
            </div>

            <!-- Progress Stats -->
            <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                <div class="stats-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-white/80 text-xs font-semibold uppercase tracking-wide mb-1">Progress</div>
                            <div class="text-3xl font-bold" id="mobileProgressCount">0</div>
                            <div class="text-white/80 text-sm mt-1">of <span id="mobileProgressTotal">0</span></div>
                        </div>
                        <div class="relative w-16 h-16">
                            <svg class="w-full h-full" viewBox="0 0 100 100">
                                <circle cx="50" cy="50" r="45" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="8"/>
                                <circle id="mobileProgressCircle" cx="50" cy="50" r="45" fill="none" stroke="white" stroke-width="8" 
                                        stroke-dasharray="283" stroke-dashoffset="283" class="progress-ring" 
                                        stroke-linecap="round"/>
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center">
                                <span class="text-xl font-bold" id="mobileProgressPercent">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Mobile Settings -->
            <div class="mt-4 space-y-2">
                <button id="mobileDarkMode" class="btn btn-sm w-full justify-start gap-2">
                    <i class="fas fa-moon"></i>
                    <span>Toggle Theme</span>
                </button>
            </div>
        </div>
    </aside>

    <div class="flex pt-20 pb-12 px-3 lg:px-6 max-w-screen-2xl mx-auto gap-8">
        <!-- Desktop Sidebar -->
        <aside id="desktopSidebar" class="w-96 flex-shrink-0 hidden lg:block transition-all duration-300">
            <div class="sidebar-glass rounded-3xl shadow-2xl p-6 sticky top-24 h-[calc(100vh-7rem)] flex flex-col">
                <!-- Header -->
                <div class="mb-6">
                    <div class="flex items-center justify-between mb-2">
                        <h2 class="text-xl font-bold text-gray-800 dark:text-gray-100">Course Curriculum</h2>
                        <div class="badge badge-lg bg-gradient-to-r from-indigo-600 to-purple-600 text-white border-0" id="totalChaptersBadge">0</div>
                    </div>
                    <p class="text-sm text-gray-600 dark:text-gray-400">Beginner to Advanced</p>
                </div>
                
                <!-- Filter Tabs -->
                <div class="flex gap-2 mb-4">
                    <button class="btn btn-sm btn-ghost flex-1 filter-btn btn-active" data-filter="all">All</button>
                    <button class="btn btn-sm btn-ghost flex-1 filter-btn" data-filter="incomplete">In Progress</button>
                    <button class="btn btn-sm btn-ghost flex-1 filter-btn" data-filter="complete">Completed</button>
                </div>
                
                <!-- Chapter List -->
                <div class="flex-1 overflow-y-auto pr-2 custom-scrollbar" id="chapterList">
                    <!-- Chapters rendered here -->
                </div>

                <!-- Progress Stats -->
                <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                    <div class="stats-card">
                        <div class="flex items-center justify-between">
                            <div>
                                <div class="text-white/80 text-xs font-semibold uppercase tracking-wide mb-1">Progress</div>
                                <div class="text-4xl font-bold" id="progressCount">0</div>
                                <div class="text-white/80 text-sm mt-1">of <span id="progressTotal">0</span> chapters</div>
                            </div>
                            <div class="relative w-20 h-20">
                                <svg class="w-full h-full" viewBox="0 0 100 100">
                                    <circle cx="50" cy="50" r="45" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="8"/>
                                    <circle id="progressCircle" cx="50" cy="50" r="45" fill="none" stroke="white" stroke-width="8" 
                                            stroke-dasharray="283" stroke-dashoffset="283" class="progress-ring" 
                                            stroke-linecap="round"/>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-2xl font-bold" id="progressPercent">0%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main id="mainContent" class="flex-1 min-w-0 transition-all duration-300">
            <div class="content-glass rounded-2xl lg:rounded-3xl shadow-2xl p-4 lg:p-12 min-h-[calc(100vh-9rem)]">
                <div class="max-w-4xl mx-auto">
                    <!-- Chapter Header -->
                    <div class="mb-8 lg:mb-10 animate-slide-in">
                        <div class="flex items-center gap-2 lg:gap-3 mb-3 lg:mb-4">
                            <span id="chapterLevel" class="level-badge px-2 lg:px-3 py-1 rounded-full bg-indigo-100 dark:bg-indigo-900 text-indigo-700 dark:text-indigo-300 text-xs">Beginner</span>
                            <span class="text-sm text-gray-500 dark:text-gray-400">‚Ä¢</span>
                            <span class="text-xs lg:text-sm text-gray-600 dark:text-gray-400 font-medium" id="readTime">15 min read</span>
                        </div>
                        <h1 id="chapterTitle" class="text-2xl lg:text-5xl font-bold text-gray-900 dark:text-gray-100 mb-3 lg:mb-4 leading-tight">
                          <i class="fas fa-book-open text-5xl lg:text-7xl opacity-10"></i>  Welcome to SG FluentX
                        </h1>
						
                        <p id="chapterSubtitle" class="text-base lg:text-lg text-gray-600 dark:text-gray-400">Select a chapter from the curriculum to begin your English mastery journey
                        
                                        
										<h3 class="text-base lg:text-lg text-gray-600 dark:text-gray-400"><span id="heroChapterCount">0</span> Professional Lessons</h3>
                                    
									</p>
						
					</div>
                    
                    <!-- Content -->
                    <div id="chapterContent" class="max-w-none">
                        <div class="hero min-h-64 lg:min-h-96 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 rounded-2xl lg:rounded-3xl shadow-2xl overflow-hidden relative">
                            <div class="absolute inset-0 bg-black/10"></div>
							
							<img src="images/Picture1.jpg" 
                             alt="Group of people learning English" 
                             class="welcome-image max-w-nonex ">
				 
                            <div class="hero-content text-center relative z-10 px-4">
                                <div class="max-w-2xl text-white">
                                    <div class="mb-6 lg:mb-8">
                                        <i class="fas fa-book-open text-5xl lg:text-7xl opacity-10"></i>
                                    </div>
                                    
                                    <p class="text-lg lg:text-xl mb-3 opacity-10">Master English from Beginner to Advanced</p>
                                    <div class="flex flex-wrap justify-center gap-2 lg:gap-4 mb-6 lg:mb-8 text-xs lg:text-sm font-semibold">
                                        <span class="bg-white/20 backdrop-blur-sm px-3 lg:px-4 py-1.5 lg:py-2 rounded-full opacity-10">Grammar</span>
                                        <span class="bg-white/20 backdrop-blur-sm px-3 lg:px-4 py-1.5 lg:py-2 rounded-full opacity-10">Vocabulary</span>
                                        <span class="bg-white/20 backdrop-blur-sm px-3 lg:px-4 py-1.5 lg:py-2 rounded-full opacity-10">Speaking</span>
                                        <span class="bg-white/20 backdrop-blur-sm px-3 lg:px-4 py-1.5 lg:py-2 rounded-full opacity-10">Writing</span>
                                        <span class="bg-white/20 backdrop-blur-sm px-3 lg:px-4 py-1.5 lg:py-2 rounded-full opacity-10">Culture</span>
                                    </div>
                                    <button class="btn btn-md lg:btn-lg bg-white text-indigo-600 hover:bg-gray-100 border-0 shadow-xl" onclick="document.querySelector('#mobileMenuToggle').click()" style="display:none;">
                                        <i class="fas fa-play mr-2"></i>
                                        Start Learning Now
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>


    <!-- Toast Notification -->
    <div class="toast toast-end toast-bottom z-50">
        <div id="progressToast" class="alert bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 shadow-2xl hidden">
            <i class="fas fa-check-circle text-2xl"></i>
            <div>
                <div class="font-bold">Chapter Completed!</div>
                <div class="text-sm opacity-90">Keep up the great work</div>
            </div>
        </div>
    </div>
    </div>


    <script>
        let totalChapters = 0;
        let chapters = [];
        let currentChapter = null;
        let completed = [];
        let currentFilter = 'all';

        // Welcome Screen Function
        function enterPlatform() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            const mainApp = document.getElementById('mainApp');
            
            welcomeScreen.classList.add('fade-out');
            
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
                mainApp.classList.add('show');
            }, 500);
        }

        // Configure marked.js
        marked.setOptions({
            breaks: true,
            gfm: true,
            headerIds: true,
            mangle: false,
            pedantic: false,
            sanitize: false,
            smartypants: true,
            xhtml: false
        });

        const manualChapterList = [];

        async function detectChapters() {
            chapters = [];
            
            if (manualChapterList.length > 0) {
                for (let config of manualChapterList) {
                    const title = await extractTitleFromFile(config.filename);
                    chapters.push({
                        id: config.id,
                        filename: config.filename,
                        title: title
                    });
                }
                totalChapters = chapters.length;
                return totalChapters;
            }
            
            let chapterNum = 1;
            
            while (true) {
                try {
                    const filename = `chapter${chapterNum}.md`;
                    const response = await fetch(`chapters/${filename}`, { method: 'HEAD' });
                    if (!response.ok) break;
                    
                    const title = await extractTitleFromFile(filename);
                    
                    chapters.push({
                        id: chapterNum,
                        filename: filename,
                        title: title
                    });
                    
                    chapterNum++;
                } catch (e) {
                    break;
                }
            }
            
            totalChapters = chapters.length;
            
            if (totalChapters === 0) {
                totalChapters = 200;
                for (let i = 1; i <= totalChapters; i++) {
                    chapters.push({
                        id: i,
                        filename: `chapter${i}.md`,
                        title: getDefaultChapterTitle(i)
                    });
                }
            }
            
            return totalChapters;
        }

        async function extractTitleFromFile(filename) {
            try {
                const response = await fetch(`chapters/${filename}?nocache=${Date.now()}`);
                if (!response.ok) return formatFilenameToTitle(filename);
                
                const content = await response.text();
                const lines = content.split('\n');
                
                for (let line of lines) {
                    const trimmedLine = line.trim();
                    
                    if (trimmedLine.startsWith('# ') && !trimmedLine.startsWith('## ')) {
                        const title = trimmedLine.substring(2).trim();
                        const cleanTitle = title.replace(/#+\s*$/, '').trim();
                        
                        if (cleanTitle.length > 0) {
                            return cleanTitle;
                        }
                    }
                }
                
                return formatFilenameToTitle(filename);
            } catch (e) {
                return formatFilenameToTitle(filename);
            }
        }

        function formatFilenameToTitle(filename) {
            let title = filename.replace(/\.md$/i, '');
            title = title.replace(/^chapter\d+/i, '');
            title = title.replace(/^[-_\s]+/, '');
            title = title.replace(/[-_]/g, ' ');
            
            title = title.split(' ').map(word => {
                if (word.length === 0) return '';
                return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
            }).join(' ');
            
            if (!title.trim()) {
                title = filename.replace(/\.md$/i, '');
                title = title.charAt(0).toUpperCase() + title.slice(1);
            }
            
            return title.trim() || 'Untitled Chapter';
        }

        function saveProgress() {
            const data = { completed, lastChapter: currentChapter };
            try {
                localStorage.setItem('SG FluentX_progress', JSON.stringify(data));
            } catch (e) {
                console.warn('Storage not available');
            }
        }

        function loadProgress() {
            try {
                const data = JSON.parse(localStorage.getItem('SG FluentX_progress') || '{}');
                completed = data.completed || [];
                return data.lastChapter;
            } catch (e) {
                return null;
            }
        }

        function getChapterLevel(chapter) {
            const total = totalChapters || 200;
            const percent = (chapter / total) * 100;
            
            if (percent <= 25) return 'Beginner';
            if (percent <= 50) return 'Elementary';
            if (percent <= 75) return 'Intermediate';
            return 'Advanced';
        }

        function getChapterInfo(chapterId) {
            return chapters.find(ch => ch.id === chapterId) || {
                id: chapterId,
                filename: `chapter${chapterId}.md`,
                title: getDefaultChapterTitle(chapterId)
            };
        }

        function getDefaultChapterTitle(chapter) {
            const titles = [
                "Introduction to English", "Basic Greetings & Introductions", "Family & Relationships", 
                "Numbers & Time Expressions", "Daily Routines & Activities", "Food & Dining Out", 
                "Shopping & Money", "Directions & Transportation", "Weather & Seasons", "Hobbies & Interests",
                "Travel & Tourism", "Work & Professions", "Present Simple Tense", "Present Continuous", 
                "Past Simple Tense", "Future Forms", "Modal Verbs", "Conditional Sentences",
                "Passive Voice", "Reported Speech", "Advanced Vocabulary", "Idioms & Expressions", 
                "Business English Basics", "Email Writing", "Formal Letters", "Essay Structure",
                "Pronunciation Guide", "Listening Skills", "Speaking Fluency", "Reading Comprehension"
            ];
            return titles[(chapter - 1) % titles.length] || `Professional English ${chapter}`;
        }

        function renderChapters(filter = '') {
            const container = document.getElementById('chapterList');
            container.innerHTML = '';
            
            if (chapters.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-8">No chapters found</div>';
                return;
            }
            
            for (let chapterInfo of chapters) {
                const i = chapterInfo.id;
                const title = chapterInfo.title;
                const level = getChapterLevel(i);
                const fullText = `Chapter ${i}: ${title} ${level}`;
                
                if (filter && !fullText.toLowerCase().includes(filter.toLowerCase())) continue;

                const isCompleted = completed.includes(i);
                
                if (currentFilter === 'complete' && !isCompleted) continue;
                if (currentFilter === 'incomplete' && isCompleted) continue;

                const isActive = currentChapter === i;

                const card = document.createElement('div');
                card.className = `chapter-card cursor-pointer p-4 rounded-2xl mb-3 border transition-all ${
                    isActive 
                        ? 'border-indigo-500 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-950 dark:to-purple-950 shadow-lg' 
                        : 'border-gray-200 dark:border-gray-700 hover:border-indigo-300 bg-white/50 dark:bg-slate-800/50'
                }`;

                const levelColors = {
                    'Beginner': 'bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300',
                    'Elementary': 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300',
                    'Intermediate': 'bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300',
                    'Advanced': 'bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300'
                };

                card.innerHTML = `
                    <div class="flex items-start gap-3">
                        <div class="flex-shrink-0 mt-1">
                            ${isCompleted 
                                ? '<div class="w-8 h-8 rounded-full bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center shadow-md"><i class="fas fa-check text-white text-sm"></i></div>' 
                                : `<div class="w-8 h-8 rounded-full bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-gray-400">${i}</div>`
                            }
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <h3 class="font-semibold text-sm ${isActive ? 'text-indigo-700 dark:text-indigo-400' : 'text-gray-800 dark:text-gray-200'} truncate">
                                    ${title}
                                </h3>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="level-badge px-2 py-0.5 rounded-full ${levelColors[level]} text-xs">
                                    ${level}
                                </span>
                                <span class="text-xs text-gray-500 dark:text-gray-400">
                                    <i class="fas fa-clock mr-1"></i>${10 + (i % 20)} min
                                </span>
                            </div>
                        </div>
                        ${isCompleted ? '<i class="fas fa-medal text-yellow-500 text-lg flex-shrink-0"></i>' : ''}
                    </div>
                `;

                card.onclick = () => loadChapter(i);
                container.appendChild(card);
            }
        }

        function renderMobileChapters(filter = '') {
            const container = document.getElementById('mobileChapterList');
            container.innerHTML = '';
            
            if (chapters.length === 0) {
                container.innerHTML = '<div class="text-center text-gray-500 py-8 text-sm">No chapters found</div>';
                return;
            }
            
            for (let chapterInfo of chapters) {
                const i = chapterInfo.id;
                const title = chapterInfo.title;
                const level = getChapterLevel(i);
                const fullText = `Chapter ${i}: ${title} ${level}`;
                
                if (filter && !fullText.toLowerCase().includes(filter.toLowerCase())) continue;

                const isCompleted = completed.includes(i);
                
                if (currentFilter === 'complete' && !isCompleted) continue;
                if (currentFilter === 'incomplete' && isCompleted) continue;

                const isActive = currentChapter === i;

                const card = document.createElement('div');
                card.className = `chapter-card cursor-pointer p-3 rounded-xl mb-2 border transition-all ${
                    isActive 
                        ? 'border-indigo-500 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-950 dark:to-purple-950 shadow-lg' 
                        : 'border-gray-200 dark:border-gray-700 hover:border-indigo-300 bg-white/50 dark:bg-slate-800/50'
                }`;

                const levelColors = {
                    'Beginner': 'bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300',
                    'Elementary': 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300',
                    'Intermediate': 'bg-orange-100 text-orange-700 dark:bg-orange-900 dark:text-orange-300',
                    'Advanced': 'bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300'
                };

                card.innerHTML = `
                    <div class="flex items-start gap-2">
                        <div class="flex-shrink-0 mt-0.5">
                            ${isCompleted 
                                ? '<div class="w-7 h-7 rounded-full bg-gradient-to-br from-green-400 to-emerald-500 flex items-center justify-center shadow-md"><i class="fas fa-check text-white text-xs"></i></div>' 
                                : `<div class="w-7 h-7 rounded-full bg-gradient-to-br from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center text-xs font-bold text-gray-600 dark:text-gray-400">${i}</div>`
                            }
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center gap-2 mb-1">
                                <h3 class="font-semibold text-xs ${isActive ? 'text-indigo-700 dark:text-indigo-400' : 'text-gray-800 dark:text-gray-200'} truncate">
                                    ${title}
                                </h3>
                            </div>
                            <div class="flex items-center gap-2">
                                <span class="level-badge px-1.5 py-0.5 rounded-full ${levelColors[level]}" style="font-size: 0.65rem;">
                                    ${level}
                                </span>
                                <span class="text-xs text-gray-500 dark:text-gray-400">
                                    <i class="fas fa-clock mr-1"></i>${10 + (i % 20)} min
                                </span>
                            </div>
                        </div>
                        ${isCompleted ? '<i class="fas fa-medal text-yellow-500 text-base flex-shrink-0"></i>' : ''}
                    </div>
                `;

                card.onclick = () => {
                    loadChapter(i);
                    closeMobileSidebarFn();
                };
                container.appendChild(card);
            }
        }

        async function loadChapter(id) {
            if (currentChapter === id) return;
            currentChapter = id;
            
            const chapterInfo = getChapterInfo(id);
            const title = chapterInfo.title;
            const level = getChapterLevel(id);
            
            document.getElementById('chapterTitle').textContent = `Chapter ${id}: ${title}`;
            document.getElementById('chapterSubtitle').textContent = `${level} Level ‚Ä¢ Comprehensive English Lesson`;
            document.getElementById('chapterLevel').textContent = level;
            document.getElementById('readTime').textContent = `${10 + (id % 20)} min read`;
            
            document.getElementById('chapterContent').innerHTML = `
                <div class="flex flex-col items-center justify-center py-32">
                    <div class="loading loading-spinner loading-lg text-indigo-600"></div>
                    <p class="mt-6 text-lg text-gray-500 dark:text-gray-400 font-medium">Loading lesson content...</p>
                </div>
            `;

            try {
                const response = await fetch(`chapters/${chapterInfo.filename}?t=${Date.now()}`);
                if (!response.ok) throw new Error('Chapter file not found');

                let markdown = await response.text();
                markdown = processYouTubeLinks(markdown);
                let html = marked.parse(markdown);
                html = processImages(html);
                
                document.getElementById('chapterContent').innerHTML = `
                    <div class="animate-slide-in markdown-content">
                        ${html}
                    </div>
                `;

                document.querySelectorAll('pre code').forEach((block) => {
                    hljs.highlightElement(block);
                });
                
                renderChapters(document.getElementById('searchInput').value || '');
                renderMobileChapters(document.getElementById('mobileSearchInput').value || '');
                
                if (!completed.includes(id)) {
                    completed.push(id);
                    saveProgress();
                    updateProgress();
                    showToast();
                }

            } catch (err) {
                document.getElementById('chapterContent').innerHTML = `
                    <div class="alert alert-error shadow-lg border-0 rounded-2xl">
                        <div class="flex items-center gap-4">
                            <i class="fas fa-exclamation-circle text-3xl"></i>
                            <div>
                                <h3 class="font-bold text-lg">Chapter Not Available</h3>
                                <p class="text-sm mt-2">Please ensure <code class="bg-black/20 px-2 py-1 rounded">${chapterInfo.filename}</code> exists in the <code class="bg-black/20 px-2 py-1 rounded">/chapters</code> folder</p>
                                <div class="mt-3 text-sm opacity-90">
                                    <strong>Quick Start Guide:</strong>
                                    <ol class="list-decimal list-inside mt-1 space-y-1">
                                        <li>Create a folder named <code class="bg-black/20 px-2 py-1 rounded">chapters</code></li>
                                        <li>Add your markdown files: <code class="bg-black/20 px-2 py-1 rounded">chapter1.md</code>, <code class="bg-black/20 px-2 py-1 rounded">chapter2.md</code>, etc.</li>
                                        <li>Place images in an <code class="bg-black/20 px-2 py-1 rounded">images</code> folder</li>
                                        <li>Reference images in markdown: <code class="bg-black/20 px-2 py-1 rounded">![Alt text](images/image.png)</code></li>
                                    </ol>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function processYouTubeLinks(markdown) {
            const listYoutubeRegex = /^[\s]*[-*]\s+(https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})(?:[^\s]*)?)/gm;
            
            markdown = markdown.replace(listYoutubeRegex, (match, fullUrl, videoId) => {
                return `<div class="youtube-embed-wrapper" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin: 2rem 0; border-radius: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,0.2);"><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; border-radius: 1rem;" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
            });
            
            const youtubeRegex = /(?:^|\n)(https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})(?:[^\s]*)?)(?:\n|$)/g;
            
            markdown = markdown.replace(youtubeRegex, (match, fullUrl, videoId) => {
                return `\n<div class="youtube-embed-wrapper" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin: 2rem 0; border-radius: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,0.2);"><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; border-radius: 1rem;" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>\n`;
            });
            
            const markdownYoutubeRegex = /\[([^\]]+)\]\((https?:\/\/(?:www\.)?(?:youtube\.com\/watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})(?:[^\)]*))\)/g;
            
            markdown = markdown.replace(markdownYoutubeRegex, (match, title, fullUrl, videoId) => {
                return `<div class="youtube-embed-wrapper" style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin: 2rem 0; border-radius: 1rem; box-shadow: 0 10px 30px rgba(0,0,0,0.2);"><div style="position: absolute; top: -2rem; left: 0; font-weight: 600; color: #6366f1; font-size: 0.875rem;">${title}</div><iframe style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; border-radius: 1rem;" src="https://www.youtube.com/embed/${videoId}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>`;
            });
            
            return markdown;
        }

        function processImages(html) {
    // Step 1: Fix relative paths (your original working code ‚Äì keep it exactly!)
    html = html.replace(/<img([^>]*?)src=["'](?!http)([^"']+)["']/g, (match, attrs, src) => {
        let cleanSrc = src.replace(/^\.?\//, '');
       
        if (!cleanSrc.startsWith('images/')) {
            cleanSrc = 'images/' + cleanSrc;
        }
       
        return `<img${attrs}src="${cleanSrc}"`;
    });

    // Step 2: Make ALL images clickable for full-screen modal (new safe addition)
    html = html.replace(/<img/g, '<img class="clickable-image cursor-zoom-in" loading="lazy"');

    return html;
}

        function updateProgress() {
            const count = completed.length;
            const percent = totalChapters > 0 ? Math.round((count / totalChapters) * 100) : 0;
            const circumference = 283;
            const offset = circumference - (percent / 100) * circumference;
            
            document.getElementById('progressCount').textContent = count;
            document.getElementById('progressPercent').textContent = `${percent}%`;
            document.getElementById('progressCircle').style.strokeDashoffset = offset;
            
            document.getElementById('mobileProgressCount').textContent = count;
            document.getElementById('mobileProgressPercent').textContent = `${percent}%`;
            document.getElementById('mobileProgressCircle').style.strokeDashoffset = offset;
        }

        function showToast() {
            const toast = document.getElementById('progressToast');
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 3000);
        }

        document.getElementById('searchInput').addEventListener('input', e => renderChapters(e.target.value));
        
        document.getElementById('mobileSearchInput').addEventListener('input', e => {
            renderChapters(e.target.value);
            renderMobileChapters(e.target.value);
        });

        document.querySelectorAll('.filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('btn-active'));
                this.classList.add('btn-active');
                currentFilter = this.dataset.filter;
                renderChapters(document.getElementById('searchInput').value || '');
            });
        });
        
        document.querySelectorAll('.mobile-filter-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.mobile-filter-btn').forEach(b => b.classList.remove('btn-active'));
                this.classList.add('btn-active');
                currentFilter = this.dataset.filter;
                renderMobileChapters(document.getElementById('mobileSearchInput').value || '');
            });
        });

        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const mobileSidebar = document.getElementById('mobileSidebar');
        const mobileSidebarOverlay = document.getElementById('mobileSidebarOverlay');
        const closeMobileSidebar = document.getElementById('closeMobileSidebar');
        
        function openMobileSidebar() {
            mobileSidebar.classList.remove('-translate-x-full');
            mobileSidebarOverlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }
        
        function closeMobileSidebarFn() {
            mobileSidebar.classList.add('-translate-x-full');
            mobileSidebarOverlay.classList.add('hidden');
            document.body.style.overflow = '';
        }
        
        mobileMenuToggle.addEventListener('click', openMobileSidebar);
        closeMobileSidebar.addEventListener('click', closeMobileSidebarFn);
        mobileSidebarOverlay.addEventListener('click', closeMobileSidebarFn);

        document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
        document.getElementById('mobileDarkMode').addEventListener('click', toggleDarkMode);
        
        function toggleDarkMode() {
            document.documentElement.classList.toggle('dark');
            try {
                localStorage.setItem('theme', document.documentElement.classList.contains('dark') ? 'dark' : 'light');
            } catch (e) {}
        }
        
        // Sidebar Toggle Function
        let sidebarHidden = false;
        const sidebarToggleBtn = document.getElementById('sidebarToggle');
        sidebarToggleBtn.addEventListener('click', toggleSidebar);
        
        function toggleSidebar() {
            const sidebar = document.getElementById('desktopSidebar');
            const mainContent = document.getElementById('mainContent');
            const toggleIcon = document.querySelector('#sidebarToggle i');
            
            sidebarHidden = !sidebarHidden;
            
            if (sidebarHidden) {
                sidebar.style.width = '0';
                sidebar.style.minWidth = '0';
                sidebar.style.opacity = '0';
                sidebar.style.overflow = 'hidden';
                sidebar.style.marginRight = '0';
                mainContent.style.maxWidth = '100%';
                toggleIcon.classList.remove('fa-bars-staggered');
                toggleIcon.classList.add('fa-indent');
                sidebarToggleBtn.title = 'Show Sidebar';
            } else {
                sidebar.style.width = '24rem';
                sidebar.style.minWidth = '24rem';
                sidebar.style.opacity = '1';
                sidebar.style.overflow = 'visible';
                sidebar.style.marginRight = '';
                mainContent.style.maxWidth = '';
                toggleIcon.classList.remove('fa-indent');
                toggleIcon.classList.add('fa-bars-staggered');
                sidebarToggleBtn.title = 'Hide Sidebar';
            }
            
            try {
                localStorage.setItem('sidebarHidden', sidebarHidden);
            } catch (e) {}
        }
        
        // Restore sidebar state
        try {
            const savedState = localStorage.getItem('sidebarHidden');
            if (savedState === 'true') {
                // Small delay to ensure DOM is ready
                setTimeout(() => toggleSidebar(), 100);
            }
        } catch (e) {}

        try {
            if (localStorage.getItem('theme') === 'dark' || (!localStorage.getItem('theme') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
        } catch (e) {}

        async function init() {
            document.getElementById('chapterList').innerHTML = `
                <div class="flex flex-col items-center justify-center py-12">
                    <div class="loading loading-spinner loading-lg text-indigo-600"></div>
                    <p class="mt-4 text-sm text-gray-500 dark:text-gray-400">Detecting chapters...</p>
                </div>
            `;
            
            document.getElementById('mobileChapterList').innerHTML = `
                <div class="flex flex-col items-center justify-center py-8">
                    <div class="loading loading-spinner loading-md text-indigo-600"></div>
                    <p class="mt-3 text-xs text-gray-500 dark:text-gray-400">Loading...</p>
                </div>
            `;
            
            await detectChapters();
            
            document.getElementById('totalChaptersBadge').textContent = totalChapters;
            document.getElementById('progressTotal').textContent = totalChapters;
            document.getElementById('mobileProgressTotal').textContent = totalChapters;
            document.getElementById('heroChapterCount').textContent = totalChapters;
            
            const lastChapter = loadProgress();
            updateProgress();
            renderChapters();
            renderMobileChapters();
            
            if (lastChapter && chapters.find(ch => ch.id === lastChapter)) {
                loadChapter(lastChapter);
            }
        }
        
        init();
    </script>
	
<script>
document.addEventListener("click", function (e) {

    // CLICK ON IMAGE ‚Üí OPEN MODAL
    if (e.target.classList.contains("clickable-image")) {
        const modal = document.getElementById("imageModal");
        const modalImage = document.getElementById("modalImage");

        modalImage.src = e.target.src;
        modal.classList.add("show");
    }

    // CLICK ON CLOSE BUTTON ‚Üí CLOSE MODAL
    if (e.target.classList.contains("close-btn")) {
        document.getElementById("imageModal").classList.remove("show");
    }

    // CLICK OUTSIDE IMAGE ‚Üí CLOSE MODAL
    if (e.target.id === "imageModal") {
        e.target.classList.remove("show");
    }
});
</script>



</body>
</html>